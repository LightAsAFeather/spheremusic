<!DOCTYPE html>
<head>
        <title>Symphony of Satellites</title>
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">

        <!-- midi.js package -->
         <script src="/static/js/MIDI/AudioDetect.js" type="text/javascript"></script>
         <script src="/static/js/MIDI/LoadPlugin.js" type="text/javascript"></script>
         <script src="/static/js/MIDI/Plugin.js" type="text/javascript"></script>
         <script src="/static/js/MIDI/Player.js" type="text/javascript"></script>
         <script src="/static/js/Window/DOMLoader.XMLHttp.js" type="text/javascript"></script>
         <script src="/static/js/Window/DOMLoader.script.js" type="text/javascript"></script>
         <!-- extras -->
         <script src="/static/inc/Base64.js" type="text/javascript"></script>
         <script src="/static/inc/base64binary.js" type="text/javascript"></script>

         <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
         <script src="/static/js/page.js" type="text/javascript"></script>
</head>

<body>
        <div class="pure-g-r">
                <div class="pure-u-1-2">
                    <img src="http://i.imgur.com/K7JmNq3.png">
                </div>
                <div class="pure-u-1-2">
                    <h1>Symphony of Satelites</h1>

                    <button class="pure-button pure-button-disabled" id="play">Loading..</button>

                </div>
        </div>

        <script type="text/javascript">

        $(document).ready(function() {

            MIDI.loadPlugin({
                soundfontUrl: "/static/soundfont/",
                instruments: [ "acoustic_grand_piano", "synth_drum" ],
                callback: function() {
                            $('#play').html('â–¶ Play');
                            $('#play').removeClass('pure-button-disabled');
                            $('#play').addClass('pure-button-primary');
                        }
            });

            $('#play').click(function() {
                playScale();
            });


        });

        playScale = function () {
            MIDI.programChange(0, 0);
            for (var n = 0; n < 100; n ++) {
                var delay = n / 4; // play one note every quarter second
                var note = MIDI.pianoKeyOffset + n; // the MIDI note
                var velocity = 127; // how hard the note hits
                // play the note
                MIDI.noteOn(0, note, velocity, delay);
            }
        };

        </script>
</body>

</html>

